09-04-2025 19:34:14 - INFO - Logging system initialized. Environment: development
09-04-2025 19:34:14 - INFO - Model loaded from model_registry/model_storage/xgboost_20250403_102300_20250403_102301.pkl
09-04-2025 19:34:14 - INFO - Successfully loaded model from model_registry/model_storage/xgboost_20250403_102300_20250403_102301.pkl
09-04-2025 19:34:14 - INFO - Found 40 features embedded in the model
09-04-2025 19:34:14 - INFO - Loaded credentials. Length: 3
09-04-2025 19:34:14 - INFO - Starting session with Capital.com...
09-04-2025 19:34:14 - INFO - About to start a new session.
09-04-2025 19:34:14 - INFO - Using encrypted password to start session.
09-04-2025 19:34:14 - INFO - AccountID and/or all_accounts is None. Initializing them now.
09-04-2025 19:34:15 - INFO - Will not print out response of all accounts.
09-04-2025 19:34:15 - INFO - Found accountId matching account USD_testing!
09-04-2025 19:34:15 - INFO - Successfully switched to account USD_testing!
09-04-2025 19:34:15 - INFO - Switched to demo account
09-04-2025 19:34:15 - INFO - Data processor thread started
09-04-2025 19:34:15 - INFO - LiveDataHandler processor thread started
09-04-2025 19:34:15 - INFO - Subscribing to GBPUSD MINUTE data with integrated data pipeline...
09-04-2025 19:34:15 - INFO - Data will be saved to: /Users/dmartinsen/pers-prog/ai-trading-v3/live/temp_live/live_data_GBPUSD_MINUTE_20250409_193415.csv
09-04-2025 19:34:15 - INFO - About to initiate subscribtion to live market data...
09-04-2025 19:34:15 - INFO - Websocket connected
09-04-2025 19:35:00 - DEBUG - Processing bid message with timestamp 1744220040000
09-04-2025 19:35:00 - DEBUG - Stored bid data for timestamp 1744220040000
09-04-2025 19:35:00 - DEBUG - Processing ask message with timestamp 1744220040000
09-04-2025 19:35:00 - DEBUG - Stored ask data for timestamp 1744220040000
09-04-2025 19:35:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:34:00
09-04-2025 19:35:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:35:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:34:00
09-04-2025 19:35:00 - DEBUG - Matched ask with existing bid for timestamp 1744220040000
09-04-2025 19:35:00 - DEBUG - Added midpoint to recent_data. Size: 1
09-04-2025 19:35:16 - DEBUG - Ping sent at 19:35:16
09-04-2025 19:36:00 - DEBUG - Processing bid message with timestamp 1744220100000
09-04-2025 19:36:00 - DEBUG - Stored bid data for timestamp 1744220100000
09-04-2025 19:36:00 - DEBUG - Processing ask message with timestamp 1744220100000
09-04-2025 19:36:00 - DEBUG - Stored ask data for timestamp 1744220100000
09-04-2025 19:36:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:35:00
09-04-2025 19:36:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:36:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:35:00
09-04-2025 19:36:00 - DEBUG - Matched ask with existing bid for timestamp 1744220100000
09-04-2025 19:36:00 - DEBUG - Added midpoint to recent_data. Size: 2
09-04-2025 19:36:16 - DEBUG - Ping sent at 19:36:16
09-04-2025 19:37:00 - DEBUG - Processing bid message with timestamp 1744220160000
09-04-2025 19:37:00 - DEBUG - Stored bid data for timestamp 1744220160000
09-04-2025 19:37:00 - DEBUG - Processing ask message with timestamp 1744220160000
09-04-2025 19:37:00 - DEBUG - Stored ask data for timestamp 1744220160000
09-04-2025 19:37:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:36:00
09-04-2025 19:37:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:37:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:36:00
09-04-2025 19:37:00 - DEBUG - Matched ask with existing bid for timestamp 1744220160000
09-04-2025 19:37:00 - DEBUG - Added midpoint to recent_data. Size: 3
09-04-2025 19:37:16 - DEBUG - Ping sent at 19:37:16
09-04-2025 19:38:00 - DEBUG - Processing bid message with timestamp 1744220220000
09-04-2025 19:38:00 - DEBUG - Stored bid data for timestamp 1744220220000
09-04-2025 19:38:00 - DEBUG - Processing ask message with timestamp 1744220220000
09-04-2025 19:38:00 - DEBUG - Stored ask data for timestamp 1744220220000
09-04-2025 19:38:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:37:00
09-04-2025 19:38:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:38:00 - DEBUG - Matched ask with existing bid for timestamp 1744220220000
09-04-2025 19:38:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:37:00
09-04-2025 19:38:00 - DEBUG - Added midpoint to recent_data. Size: 4
09-04-2025 19:38:16 - DEBUG - Ping sent at 19:38:16
09-04-2025 19:39:00 - DEBUG - Processing bid message with timestamp 1744220280000
09-04-2025 19:39:00 - DEBUG - Stored bid data for timestamp 1744220280000
09-04-2025 19:39:00 - DEBUG - Processing ask message with timestamp 1744220280000
09-04-2025 19:39:00 - DEBUG - Stored ask data for timestamp 1744220280000
09-04-2025 19:39:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:38:00
09-04-2025 19:39:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:39:00 - DEBUG - Matched ask with existing bid for timestamp 1744220280000
09-04-2025 19:39:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:38:00
09-04-2025 19:39:00 - DEBUG - Added midpoint to recent_data. Size: 5
09-04-2025 19:39:16 - DEBUG - Ping sent at 19:39:16
09-04-2025 19:40:00 - DEBUG - Processing bid message with timestamp 1744220340000
09-04-2025 19:40:00 - DEBUG - Stored bid data for timestamp 1744220340000
09-04-2025 19:40:00 - DEBUG - Processing ask message with timestamp 1744220340000
09-04-2025 19:40:00 - DEBUG - Stored ask data for timestamp 1744220340000
09-04-2025 19:40:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:39:00
09-04-2025 19:40:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:40:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:39:00
09-04-2025 19:40:00 - DEBUG - Matched ask with existing bid for timestamp 1744220340000
09-04-2025 19:40:00 - DEBUG - Added midpoint to recent_data. Size: 6
09-04-2025 19:40:16 - DEBUG - Ping sent at 19:40:16
09-04-2025 19:41:00 - DEBUG - Processing bid message with timestamp 1744220400000
09-04-2025 19:41:00 - DEBUG - Stored bid data for timestamp 1744220400000
09-04-2025 19:41:00 - DEBUG - Processing ask message with timestamp 1744220400000
09-04-2025 19:41:00 - DEBUG - Stored ask data for timestamp 1744220400000
09-04-2025 19:41:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:40:00
09-04-2025 19:41:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:41:00 - DEBUG - Matched ask with existing bid for timestamp 1744220400000
09-04-2025 19:41:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:40:00
09-04-2025 19:41:00 - DEBUG - Added midpoint to recent_data. Size: 7
09-04-2025 19:41:16 - DEBUG - Ping sent at 19:41:16
09-04-2025 19:42:00 - DEBUG - Processing bid message with timestamp 1744220460000
09-04-2025 19:42:00 - DEBUG - Stored bid data for timestamp 1744220460000
09-04-2025 19:42:00 - DEBUG - Processing ask message with timestamp 1744220460000
09-04-2025 19:42:00 - DEBUG - Stored ask data for timestamp 1744220460000
09-04-2025 19:42:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:41:00
09-04-2025 19:42:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:42:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:41:00
09-04-2025 19:42:00 - DEBUG - Matched ask with existing bid for timestamp 1744220460000
09-04-2025 19:42:00 - DEBUG - Added midpoint to recent_data. Size: 8
09-04-2025 19:42:16 - DEBUG - Ping sent at 19:42:16
09-04-2025 19:43:01 - DEBUG - Processing bid message with timestamp 1744220520000
09-04-2025 19:43:01 - DEBUG - Stored bid data for timestamp 1744220520000
09-04-2025 19:43:01 - DEBUG - Processing ask message with timestamp 1744220520000
09-04-2025 19:43:01 - DEBUG - Stored ask data for timestamp 1744220520000
09-04-2025 19:43:01 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:42:00
09-04-2025 19:43:01 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:43:01 - DEBUG - Got midpoint from queue: 2025-04-09 19:42:00
09-04-2025 19:43:01 - DEBUG - Matched ask with existing bid for timestamp 1744220520000
09-04-2025 19:43:01 - DEBUG - Added midpoint to recent_data. Size: 9
09-04-2025 19:43:16 - DEBUG - Ping sent at 19:43:16
09-04-2025 19:44:00 - DEBUG - Processing bid message with timestamp 1744220580000
09-04-2025 19:44:00 - DEBUG - Stored bid data for timestamp 1744220580000
09-04-2025 19:44:00 - DEBUG - Processing ask message with timestamp 1744220580000
09-04-2025 19:44:00 - DEBUG - Stored ask data for timestamp 1744220580000
09-04-2025 19:44:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:43:00
09-04-2025 19:44:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:44:00 - DEBUG - Matched ask with existing bid for timestamp 1744220580000
09-04-2025 19:44:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:43:00
09-04-2025 19:44:00 - INFO - Processed 20 market data messages
09-04-2025 19:44:00 - DEBUG - Added midpoint to recent_data. Size: 10
09-04-2025 19:44:00 - INFO - Buffer status: 10 processed points, 0 pending bids, 0 pending asks
09-04-2025 19:44:00 - DEBUG - Getting latest data. recent_data size: 10
09-04-2025 19:44:00 - INFO - Latest data: 2025-04-09 19:43:00 | OHLC: 1.27825/1.27869/1.27801/1.27809
09-04-2025 19:44:00 - INFO - Saved 10 records to /Users/dmartinsen/pers-prog/ai-trading-v3/live/temp_live/live_data_GBPUSD_MINUTE_20250409_193415.csv
09-04-2025 19:44:16 - DEBUG - Ping sent at 19:44:16
09-04-2025 19:44:16 - INFO - Processed 20 market data messages
09-04-2025 19:44:16 - INFO - Buffer status: 10 processed points, 0 pending bids, 0 pending asks
09-04-2025 19:44:16 - DEBUG - Getting latest data. recent_data size: 10
09-04-2025 19:44:16 - INFO - Latest data: 2025-04-09 19:43:00 | OHLC: 1.27825/1.27869/1.27801/1.27809
09-04-2025 19:45:00 - DEBUG - Processing bid message with timestamp 1744220640000
09-04-2025 19:45:00 - DEBUG - Stored bid data for timestamp 1744220640000
09-04-2025 19:45:00 - DEBUG - Processing ask message with timestamp 1744220640000
09-04-2025 19:45:00 - DEBUG - Stored ask data for timestamp 1744220640000
09-04-2025 19:45:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:44:00
09-04-2025 19:45:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:45:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:44:00
09-04-2025 19:45:00 - DEBUG - Matched ask with existing bid for timestamp 1744220640000
09-04-2025 19:45:00 - DEBUG - Added midpoint to recent_data. Size: 11
09-04-2025 19:45:16 - DEBUG - Ping sent at 19:45:16
09-04-2025 19:46:00 - DEBUG - Processing bid message with timestamp 1744220700000
09-04-2025 19:46:00 - DEBUG - Stored bid data for timestamp 1744220700000
09-04-2025 19:46:00 - DEBUG - Processing ask message with timestamp 1744220700000
09-04-2025 19:46:00 - DEBUG - Stored ask data for timestamp 1744220700000
09-04-2025 19:46:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:45:00
09-04-2025 19:46:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:46:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:45:00
09-04-2025 19:46:00 - DEBUG - Matched ask with existing bid for timestamp 1744220700000
09-04-2025 19:46:00 - DEBUG - Added midpoint to recent_data. Size: 12
09-04-2025 19:46:16 - DEBUG - Ping sent at 19:46:16
09-04-2025 19:47:00 - DEBUG - Processing bid message with timestamp 1744220760000
09-04-2025 19:47:00 - DEBUG - Stored bid data for timestamp 1744220760000
09-04-2025 19:47:00 - DEBUG - Processing ask message with timestamp 1744220760000
09-04-2025 19:47:00 - DEBUG - Stored ask data for timestamp 1744220760000
09-04-2025 19:47:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:46:00
09-04-2025 19:47:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:47:00 - DEBUG - Matched ask with existing bid for timestamp 1744220760000
09-04-2025 19:47:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:46:00
09-04-2025 19:47:00 - DEBUG - Added midpoint to recent_data. Size: 13
09-04-2025 19:47:16 - DEBUG - Ping sent at 19:47:16
09-04-2025 19:48:00 - DEBUG - Processing bid message with timestamp 1744220820000
09-04-2025 19:48:00 - DEBUG - Stored bid data for timestamp 1744220820000
09-04-2025 19:48:00 - DEBUG - Processing ask message with timestamp 1744220820000
09-04-2025 19:48:00 - DEBUG - Stored ask data for timestamp 1744220820000
09-04-2025 19:48:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:47:00
09-04-2025 19:48:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:48:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:47:00
09-04-2025 19:48:00 - DEBUG - Matched ask with existing bid for timestamp 1744220820000
09-04-2025 19:48:00 - DEBUG - Added midpoint to recent_data. Size: 14
09-04-2025 19:48:16 - DEBUG - Ping sent at 19:48:16
09-04-2025 19:49:00 - DEBUG - Processing bid message with timestamp 1744220880000
09-04-2025 19:49:00 - DEBUG - Stored bid data for timestamp 1744220880000
09-04-2025 19:49:00 - DEBUG - Processing ask message with timestamp 1744220880000
09-04-2025 19:49:00 - DEBUG - Stored ask data for timestamp 1744220880000
09-04-2025 19:49:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:48:00
09-04-2025 19:49:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:49:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:48:00
09-04-2025 19:49:00 - DEBUG - Matched ask with existing bid for timestamp 1744220880000
09-04-2025 19:49:00 - DEBUG - Added midpoint to recent_data. Size: 15
09-04-2025 19:49:16 - DEBUG - Ping sent at 19:49:16
09-04-2025 19:50:00 - DEBUG - Processing bid message with timestamp 1744220940000
09-04-2025 19:50:00 - DEBUG - Stored bid data for timestamp 1744220940000
09-04-2025 19:50:00 - DEBUG - Processing ask message with timestamp 1744220940000
09-04-2025 19:50:00 - DEBUG - Stored ask data for timestamp 1744220940000
09-04-2025 19:50:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:49:00
09-04-2025 19:50:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:50:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:49:00
09-04-2025 19:50:00 - DEBUG - Matched ask with existing bid for timestamp 1744220940000
09-04-2025 19:50:00 - DEBUG - Added midpoint to recent_data. Size: 16
09-04-2025 19:50:16 - DEBUG - Ping sent at 19:50:16
09-04-2025 19:51:00 - DEBUG - Processing bid message with timestamp 1744221000000
09-04-2025 19:51:00 - DEBUG - Stored bid data for timestamp 1744221000000
09-04-2025 19:51:00 - DEBUG - Processing ask message with timestamp 1744221000000
09-04-2025 19:51:00 - DEBUG - Stored ask data for timestamp 1744221000000
09-04-2025 19:51:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:50:00
09-04-2025 19:51:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:51:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:50:00
09-04-2025 19:51:00 - DEBUG - Matched ask with existing bid for timestamp 1744221000000
09-04-2025 19:51:00 - DEBUG - Added midpoint to recent_data. Size: 17
09-04-2025 19:51:16 - DEBUG - Ping sent at 19:51:16
09-04-2025 19:52:00 - DEBUG - Processing bid message with timestamp 1744221060000
09-04-2025 19:52:00 - DEBUG - Stored bid data for timestamp 1744221060000
09-04-2025 19:52:00 - DEBUG - Processing ask message with timestamp 1744221060000
09-04-2025 19:52:00 - DEBUG - Stored ask data for timestamp 1744221060000
09-04-2025 19:52:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:51:00
09-04-2025 19:52:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:52:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:51:00
09-04-2025 19:52:00 - DEBUG - Matched ask with existing bid for timestamp 1744221060000
09-04-2025 19:52:00 - DEBUG - Added midpoint to recent_data. Size: 18
09-04-2025 19:52:16 - DEBUG - Ping sent at 19:52:16
09-04-2025 19:53:00 - DEBUG - Processing bid message with timestamp 1744221120000
09-04-2025 19:53:00 - DEBUG - Stored bid data for timestamp 1744221120000
09-04-2025 19:53:00 - DEBUG - Processing ask message with timestamp 1744221120000
09-04-2025 19:53:00 - DEBUG - Stored ask data for timestamp 1744221120000
09-04-2025 19:53:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:52:00
09-04-2025 19:53:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:53:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:52:00
09-04-2025 19:53:00 - DEBUG - Matched ask with existing bid for timestamp 1744221120000
09-04-2025 19:53:00 - DEBUG - Added midpoint to recent_data. Size: 19
09-04-2025 19:53:16 - DEBUG - Ping sent at 19:53:16
09-04-2025 19:54:00 - DEBUG - Processing bid message with timestamp 1744221180000
09-04-2025 19:54:00 - DEBUG - Stored bid data for timestamp 1744221180000
09-04-2025 19:54:00 - DEBUG - Processing ask message with timestamp 1744221180000
09-04-2025 19:54:00 - DEBUG - Stored ask data for timestamp 1744221180000
09-04-2025 19:54:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:53:00
09-04-2025 19:54:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:54:00 - DEBUG - Matched ask with existing bid for timestamp 1744221180000
09-04-2025 19:54:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:53:00
09-04-2025 19:54:00 - INFO - Processed 40 market data messages
09-04-2025 19:54:00 - DEBUG - Added midpoint to recent_data. Size: 20
09-04-2025 19:54:00 - INFO - Buffer status: 20 processed points, 0 pending bids, 0 pending asks
09-04-2025 19:54:00 - DEBUG - Getting latest data. recent_data size: 20
09-04-2025 19:54:00 - INFO - Latest data: 2025-04-09 19:53:00 | OHLC: 1.28062/1.28113/1.28022/1.28035
09-04-2025 19:54:00 - INFO - Saved 20 records to /Users/dmartinsen/pers-prog/ai-trading-v3/live/temp_live/live_data_GBPUSD_MINUTE_20250409_193415.csv
09-04-2025 19:54:16 - DEBUG - Ping sent at 19:54:16
09-04-2025 19:54:16 - INFO - Processed 40 market data messages
09-04-2025 19:54:16 - INFO - Buffer status: 20 processed points, 0 pending bids, 0 pending asks
09-04-2025 19:54:16 - DEBUG - Getting latest data. recent_data size: 20
09-04-2025 19:54:16 - INFO - Latest data: 2025-04-09 19:53:00 | OHLC: 1.28062/1.28113/1.28022/1.28035
09-04-2025 19:55:00 - DEBUG - Processing bid message with timestamp 1744221240000
09-04-2025 19:55:00 - DEBUG - Stored bid data for timestamp 1744221240000
09-04-2025 19:55:00 - DEBUG - Processing ask message with timestamp 1744221240000
09-04-2025 19:55:00 - DEBUG - Stored ask data for timestamp 1744221240000
09-04-2025 19:55:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:54:00
09-04-2025 19:55:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:55:00 - DEBUG - Matched ask with existing bid for timestamp 1744221240000
09-04-2025 19:55:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:54:00
09-04-2025 19:55:00 - DEBUG - Added midpoint to recent_data. Size: 21
09-04-2025 19:55:16 - DEBUG - Ping sent at 19:55:16
09-04-2025 19:56:00 - DEBUG - Processing bid message with timestamp 1744221300000
09-04-2025 19:56:00 - DEBUG - Stored bid data for timestamp 1744221300000
09-04-2025 19:56:00 - DEBUG - Processing ask message with timestamp 1744221300000
09-04-2025 19:56:00 - DEBUG - Stored ask data for timestamp 1744221300000
09-04-2025 19:56:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:55:00
09-04-2025 19:56:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:56:00 - DEBUG - Matched ask with existing bid for timestamp 1744221300000
09-04-2025 19:56:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:55:00
09-04-2025 19:56:00 - DEBUG - Added midpoint to recent_data. Size: 22
09-04-2025 19:56:16 - DEBUG - Ping sent at 19:56:16
09-04-2025 19:57:00 - DEBUG - Processing bid message with timestamp 1744221360000
09-04-2025 19:57:00 - DEBUG - Stored bid data for timestamp 1744221360000
09-04-2025 19:57:00 - DEBUG - Processing ask message with timestamp 1744221360000
09-04-2025 19:57:00 - DEBUG - Stored ask data for timestamp 1744221360000
09-04-2025 19:57:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:56:00
09-04-2025 19:57:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:56:00
09-04-2025 19:57:00 - DEBUG - Added midpoint to queue. Queue size: ~0
09-04-2025 19:57:00 - DEBUG - Matched ask with existing bid for timestamp 1744221360000
09-04-2025 19:57:00 - DEBUG - Added midpoint to recent_data. Size: 23
09-04-2025 19:57:16 - DEBUG - Ping sent at 19:57:16
09-04-2025 19:58:00 - DEBUG - Processing bid message with timestamp 1744221420000
09-04-2025 19:58:00 - DEBUG - Stored bid data for timestamp 1744221420000
09-04-2025 19:58:00 - DEBUG - Processing ask message with timestamp 1744221420000
09-04-2025 19:58:00 - DEBUG - Stored ask data for timestamp 1744221420000
09-04-2025 19:58:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:57:00
09-04-2025 19:58:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:58:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:57:00
09-04-2025 19:58:00 - DEBUG - Added midpoint to recent_data. Size: 24
09-04-2025 19:58:00 - DEBUG - Matched ask with existing bid for timestamp 1744221420000
09-04-2025 19:58:16 - DEBUG - Ping sent at 19:58:16
09-04-2025 19:59:00 - DEBUG - Processing bid message with timestamp 1744221480000
09-04-2025 19:59:00 - DEBUG - Stored bid data for timestamp 1744221480000
09-04-2025 19:59:00 - DEBUG - Processing ask message with timestamp 1744221480000
09-04-2025 19:59:00 - DEBUG - Stored ask data for timestamp 1744221480000
09-04-2025 19:59:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:58:00
09-04-2025 19:59:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 19:59:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:58:00
09-04-2025 19:59:00 - DEBUG - Matched ask with existing bid for timestamp 1744221480000
09-04-2025 19:59:00 - DEBUG - Added midpoint to recent_data. Size: 25
09-04-2025 19:59:00 - DEBUG - Generated features. New shape: (25, 66)
09-04-2025 19:59:00 - WARNING - Missing 9 expected features: {'open_raw', 'high_original', 'open_original', 'low_original', 'high_raw', 'volume', 'close_raw', 'low_raw', 'close_original'}
09-04-2025 19:59:00 - DEBUG - Final feature set for model: 31 features, 25 rows
09-04-2025 19:59:00 - DEBUG - Running prediction on data with shape (25, 31)
09-04-2025 19:59:00 - DEBUG - Column dtypes: gk_volatility            float64
open_return              float64
low_return               float64
high_return              float64
volatility_5             float64
price_accel              float64
roc_5                    float64
roc_1                    float64
volatility_10            float64
volatility_20            float64
volatility_30            float64
macd_hist                float64
roc_10                   float64
macd_signal              float64
roc_20                   float64
dist_to_support_20       float64
dist_to_resistance_10    float64
rsi_14                   float64
normalized_atr           float64
stoch_d                  float64
dist_to_support_10       float64
dist_to_resistance_20    float64
macd                     float64
atr_14                   float64
stoch_k                  float64
hour_of_day                int32
ema_200                  float64
day_of_week                int32
month                      int32
sma_50                   float64
ema_50                   float64
dtype: object
09-04-2025 19:59:00 - ERROR - Error in model prediction or strategy execution: feature_names mismatch: ['gk_volatility', 'volume', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50'] ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
expected open_raw, high_original, open_original, low_original, high_raw, volume, close_raw, low_raw, close_original in input data
09-04-2025 19:59:00 - ERROR - Traceback (most recent call last):
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/live/live_data_handling/live_data_handler.py", line 279, in _data_processor
    prediction = self.model.predict(model_input)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/models/tree/xgboost_model.py", line 116, in predict
    return self.model.predict(X)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 729, in inner_f
    return func(**kwargs)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/sklearn.py", line 1718, in predict
    class_probs = super().predict(
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 729, in inner_f
    return func(**kwargs)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/sklearn.py", line 1327, in predict
    predts = self.get_booster().inplace_predict(
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 729, in inner_f
    return func(**kwargs)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 2667, in inplace_predict
    self._validate_features(fns)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 3243, in _validate_features
    raise ValueError(msg.format(self.feature_names, feature_names))
ValueError: feature_names mismatch: ['gk_volatility', 'volume', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50'] ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
expected open_raw, high_original, open_original, low_original, high_raw, volume, close_raw, low_raw, close_original in input data

09-04-2025 19:59:16 - DEBUG - Ping sent at 19:59:16
09-04-2025 20:00:00 - DEBUG - Processing bid message with timestamp 1744221540000
09-04-2025 20:00:00 - DEBUG - Stored bid data for timestamp 1744221540000
09-04-2025 20:00:00 - DEBUG - Processing ask message with timestamp 1744221540000
09-04-2025 20:00:00 - DEBUG - Stored ask data for timestamp 1744221540000
09-04-2025 20:00:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-09 19:59:00
09-04-2025 20:00:00 - DEBUG - Added midpoint to queue. Queue size: ~1
09-04-2025 20:00:00 - DEBUG - Matched ask with existing bid for timestamp 1744221540000
09-04-2025 20:00:00 - DEBUG - Got midpoint from queue: 2025-04-09 19:59:00
09-04-2025 20:00:00 - DEBUG - Added midpoint to recent_data. Size: 26
09-04-2025 20:00:00 - DEBUG - Generated features. New shape: (26, 66)
09-04-2025 20:00:00 - WARNING - Missing 9 expected features: {'open_raw', 'high_original', 'open_original', 'low_original', 'high_raw', 'volume', 'close_raw', 'low_raw', 'close_original'}
09-04-2025 20:00:00 - DEBUG - Final feature set for model: 31 features, 26 rows
09-04-2025 20:00:00 - DEBUG - Running prediction on data with shape (26, 31)
09-04-2025 20:00:00 - DEBUG - Column dtypes: gk_volatility            float64
open_return              float64
low_return               float64
high_return              float64
volatility_5             float64
price_accel              float64
roc_5                    float64
roc_1                    float64
volatility_10            float64
volatility_20            float64
volatility_30            float64
macd_hist                float64
roc_10                   float64
macd_signal              float64
roc_20                   float64
dist_to_support_20       float64
dist_to_resistance_10    float64
rsi_14                   float64
normalized_atr           float64
stoch_d                  float64
dist_to_support_10       float64
dist_to_resistance_20    float64
macd                     float64
atr_14                   float64
stoch_k                  float64
hour_of_day                int32
ema_200                  float64
day_of_week                int32
month                      int32
sma_50                   float64
ema_50                   float64
dtype: object
09-04-2025 20:00:00 - ERROR - Error in model prediction or strategy execution: feature_names mismatch: ['gk_volatility', 'volume', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50'] ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
expected open_raw, high_original, open_original, low_original, high_raw, volume, close_raw, low_raw, close_original in input data
09-04-2025 20:00:00 - ERROR - Traceback (most recent call last):
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/live/live_data_handling/live_data_handler.py", line 279, in _data_processor
    prediction = self.model.predict(model_input)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/models/tree/xgboost_model.py", line 116, in predict
    return self.model.predict(X)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 729, in inner_f
    return func(**kwargs)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/sklearn.py", line 1718, in predict
    class_probs = super().predict(
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 729, in inner_f
    return func(**kwargs)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/sklearn.py", line 1327, in predict
    predts = self.get_booster().inplace_predict(
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 729, in inner_f
    return func(**kwargs)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 2667, in inplace_predict
    self._validate_features(fns)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/xgboost/core.py", line 3243, in _validate_features
    raise ValueError(msg.format(self.feature_names, feature_names))
ValueError: feature_names mismatch: ['gk_volatility', 'volume', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50'] ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
expected open_raw, high_original, open_original, low_original, high_raw, volume, close_raw, low_raw, close_original in input data

09-04-2025 20:00:11 - INFO - Received keyboard interrupt, shutting down...
09-04-2025 20:00:11 - INFO - Saved 26 records to /Users/dmartinsen/pers-prog/ai-trading-v3/live/temp_live/live_data_GBPUSD_MINUTE_20250409_193415.csv
09-04-2025 20:00:12 - INFO - Ending session with Capital.com...
09-04-2025 20:00:12 - CRITICAL - Uncaught exception
Traceback (most recent call last):
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/live/run_live_integration.py", line 276, in main
    subscribe_and_process_data(
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/live/run_live_integration.py", line 244, in subscribe_and_process_data
    data_handler.stop()
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/live/live_data_handling/live_data_handler.py", line 99, in stop
    self.processor_thread.join(timeout=5.0)
  File "/opt/homebrew/Cellar/python@3.10/3.10.16/Frameworks/Python.framework/Versions/3.10/lib/python3.10/threading.py", line 1100, in join
    self._wait_for_tstate_lock(timeout=max(timeout, 0))
  File "/opt/homebrew/Cellar/python@3.10/3.10.16/Frameworks/Python.framework/Versions/3.10/lib/python3.10/threading.py", line 1116, in _wait_for_tstate_lock
    if lock.acquire(block, timeout):
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/main.py", line 163, in <module>
    exit(main())
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/main.py", line 160, in main
    run_live_integration.main(duration_minutes=60)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/live/run_live_integration.py", line 291, in main
    broker.end_session()
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/broker/capital_com/capitalcom.py", line 48, in end_session
    return session.end_session(X_SECURITY_TOKEN=X_SECURITY_TOKEN or self.x_security_token, CST=CST or self.cst)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/broker/capital_com/rest_api/session.py", line 85, in end_session
    res = conn.getresponse()
  File "/opt/homebrew/Cellar/python@3.10/3.10.16/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/opt/homebrew/Cellar/python@3.10/3.10.16/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/opt/homebrew/Cellar/python@3.10/3.10.16/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py", line 287, in _read_status
    raise RemoteDisconnected("Remote end closed connection without"
http.client.RemoteDisconnected: Remote end closed connection without response
09-04-2025 20:00:16 - DEBUG - Ping sent at 20:00:16
