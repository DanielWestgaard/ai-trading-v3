02-04-2025 15:47:10 - INFO - Logging system initialized. Environment: development
02-04-2025 15:47:12 - INFO - Starting model training and backtesting workflow
02-04-2025 15:47:12 - INFO - Loading data from data/storage/capital_com/processed/processed_GBPUSD_m5_20240101_20250101.csv
02-04-2025 15:47:12 - INFO - Data loaded with shape: (74693, 41)
02-04-2025 15:47:12 - INFO - Date range: 2024-01-02 00:35:00 to 2024-12-31 21:55:00
02-04-2025 15:47:12 - INFO - Training model with configuration:
02-04-2025 15:47:12 - INFO - {
  "model_type": "xgboost",
  "prediction_type": "classification",
  "target": "close_return",
  "features": null,
  "prediction_horizon": 1,
  "test_size": 0.2,
  "cross_validate": true,
  "scale_features": true,
  "model_params": {
    "n_estimators": 100,
    "max_depth": 5,
    "learning_rate": 0.1,
    "subsample": 0.8,
    "colsample_bytree": 0.8,
    "objective": "binary:logistic",
    "eval_metric": "auc",
    "random_state": 42
  }
}
02-04-2025 15:47:12 - ERROR - Error in workflow: 'close_return'
Traceback (most recent call last):
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'close_return'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/run_model_backtest.py", line 173, in main
    model, trainer = train_model(df, model_config)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/run_model_backtest.py", line 57, in train_model
    model = trainer.train(df)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/models/model_trainer.py", line 151, in train
    X_train, X_test, y_train, y_test = self.prepare_data(data)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/models/model_trainer.py", line 91, in prepare_data
    future_target = df[self.target].shift(-self.prediction_horizon)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
  File "/Users/dmartinsen/pers-prog/ai-trading-v3/venv/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
KeyError: 'close_return'
