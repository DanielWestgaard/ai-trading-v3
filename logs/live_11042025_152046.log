11-04-2025 15:20:46 - INFO - Logging system initialized. Environment: development
11-04-2025 15:20:46 - INFO - Loading model from model_registry/model_storage/xgboost_20250403_102300_20250403_102301.pkl
11-04-2025 15:20:46 - INFO - Model loaded from model_registry/model_storage/xgboost_20250403_102300_20250403_102301.pkl
11-04-2025 15:20:46 - INFO - Model loaded from model_registry/model_storage/xgboost_20250403_102300_20250403_102301.pkl
11-04-2025 15:20:46 - INFO - Loaded credentials. Length: 3
11-04-2025 15:20:46 - INFO - Starting session with Capital.com...
11-04-2025 15:20:46 - INFO - About to start a new session.
11-04-2025 15:20:46 - INFO - Using encrypted password to start session.
11-04-2025 15:20:46 - INFO - AccountID and/or all_accounts is None. Initializing them now.
11-04-2025 15:20:47 - INFO - Will not print out response of all accounts.
11-04-2025 15:20:47 - INFO - Found accountId matching account USD_testing!
11-04-2025 15:20:47 - INFO - Successfully switched to account USD_testing!
11-04-2025 15:20:47 - INFO - Switched to account: USD_testing
11-04-2025 15:20:47 - INFO - Initializing model-based strategy
11-04-2025 15:20:47 - INFO - Subscribing to market data for GBPUSD
11-04-2025 15:20:47 - INFO - Fetching historical data for warm-up period
11-04-2025 15:20:47 - INFO - Fetching historical data for GBPUSD from 2025-04-11T09:10:47 to 2025-04-11T13:20:47
11-04-2025 15:20:47 - INFO - Inside historical_prices() markets_info.py
11-04-2025 15:20:47 - INFO - Warming up data handler with 250 historical data points
11-04-2025 15:20:47 - INFO - Saved 250 records to /Users/dmartinsen/pers-prog/ai-trading-v3/live/temp_live/live_data_GBPUSD_20250411_152047.csv
11-04-2025 15:20:47 - INFO - Data handler warmed up with 250 data points
11-04-2025 15:20:47 - INFO - Successfully retrieved 250 previous bars.
11-04-2025 15:20:47 - INFO - About to initiate subscribtion to live market data...
11-04-2025 15:20:47 - INFO - Websocket connected
11-04-2025 15:20:48 - INFO - Data processor thread started
11-04-2025 15:20:48 - INFO - LiveDataHandler processor thread started
11-04-2025 15:20:48 - INFO - Starting live trading service
11-04-2025 15:20:48 - INFO - Initializing model-based strategy
11-04-2025 15:20:48 - INFO - Backtest starting with model-based strategy
11-04-2025 15:20:48 - INFO - Trading loop started
11-04-2025 15:20:48 - INFO - Live trading service started
11-04-2025 15:20:48 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:48 - INFO - Running indefinitely (Ctrl+C to stop)
11-04-2025 15:20:48 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:48 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:48 - DEBUG - Resampler decision: True
11-04-2025 15:20:49 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:49 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:49 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:49 - DEBUG - Resampler decision: True
11-04-2025 15:20:50 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:50 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:50 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:50 - DEBUG - Resampler decision: True
11-04-2025 15:20:51 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:51 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:51 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:51 - DEBUG - Resampler decision: True
11-04-2025 15:20:52 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:52 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:52 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:52 - DEBUG - Resampler decision: True
11-04-2025 15:20:52 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:52 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:53 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:53 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:53 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:53 - DEBUG - Resampler decision: True
11-04-2025 15:20:53 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:53 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:54 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:54 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:54 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:54 - DEBUG - Resampler decision: True
11-04-2025 15:20:54 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:54 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:55 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:55 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:55 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:55 - DEBUG - Resampler decision: True
11-04-2025 15:20:55 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:55 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:56 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:56 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:56 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:56 - DEBUG - Resampler decision: True
11-04-2025 15:20:56 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:56 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:57 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:57 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:57 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:57 - DEBUG - Resampler decision: True
11-04-2025 15:20:57 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:57 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:58 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:58 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:58 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:58 - DEBUG - Resampler decision: True
11-04-2025 15:20:58 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:58 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:20:59 - DEBUG - Getting latest data. recent_data size: 250
11-04-2025 15:20:59 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:20:59 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:20:59 - DEBUG - Resampler decision: True
11-04-2025 15:20:59 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:20:59 - WARNING - Too many features missing (31), skipping signal generation
11-04-2025 15:21:00 - DEBUG - Processing bid message with timestamp 1744377600000
11-04-2025 15:21:00 - DEBUG - Stored bid data for timestamp 1744377600000
11-04-2025 15:21:00 - DEBUG - Processing ask message with timestamp 1744377600000
11-04-2025 15:21:00 - DEBUG - Stored ask data for timestamp 1744377600000
11-04-2025 15:21:00 - DEBUG - Created midpoint for GBPUSD at 2025-04-11 15:20:00
11-04-2025 15:21:00 - DEBUG - Added midpoint to queue. Queue size: ~1
11-04-2025 15:21:00 - DEBUG - Got midpoint from queue: 2025-04-11 15:20:00
11-04-2025 15:21:00 - DEBUG - Matched ask with existing bid for timestamp 1744377600000
11-04-2025 15:21:00 - DEBUG - Added midpoint to recent_data. Size: 251
11-04-2025 15:21:00 - DEBUG - Generated features. New shape: (251, 74)
11-04-2025 15:21:00 - DEBUG - Columns after feature generation: ['Date', 'epic', 'resolution', 'timestamp', 'Open', 'High', 'Low', 'Close', 'open_raw', 'high_raw'] (showing first 10)
11-04-2025 15:21:00 - DEBUG - Columns after feature preparation: ['Date', 'epic', 'resolution', 'timestamp', 'Open', 'High', 'Low', 'Close', 'open_raw', 'high_raw'] (showing first 10)
11-04-2025 15:21:00 - DEBUG - Column dtypes: gk_volatility            float64
volume                   float64
open_return              float64
low_return               float64
high_return              float64
volatility_5             float64
price_accel              float64
roc_5                    float64
roc_1                    float64
volatility_10            float64
volatility_20            float64
volatility_30            float64
macd_hist                float64
roc_10                   float64
macd_signal              float64
roc_20                   float64
dist_to_support_20       float64
dist_to_resistance_10    float64
rsi_14                   float64
normalized_atr           float64
stoch_d                  float64
dist_to_support_10       float64
dist_to_resistance_20    float64
macd                     float64
atr_14                   float64
stoch_k                  float64
hour_of_day              float64
ema_200                  float64
open_raw                 float64
high_raw                 float64
low_raw                  float64
close_raw                float64
open_original            float64
high_original            float64
low_original             float64
close_original           float64
day_of_week                int32
month                      int32
sma_50                   float64
ema_50                   float64
dtype: object
11-04-2025 15:21:00 - DEBUG - Final feature set for model: 40 features, 251 rows
11-04-2025 15:21:00 - DEBUG - Running prediction on data with shape (251, 40)
11-04-2025 15:21:00 - DEBUG - Column dtypes: gk_volatility            float64
volume                   float64
open_return              float64
low_return               float64
high_return              float64
volatility_5             float64
price_accel              float64
roc_5                    float64
roc_1                    float64
volatility_10            float64
volatility_20            float64
volatility_30            float64
macd_hist                float64
roc_10                   float64
macd_signal              float64
roc_20                   float64
dist_to_support_20       float64
dist_to_resistance_10    float64
rsi_14                   float64
normalized_atr           float64
stoch_d                  float64
dist_to_support_10       float64
dist_to_resistance_20    float64
macd                     float64
atr_14                   float64
stoch_k                  float64
hour_of_day              float64
ema_200                  float64
open_raw                 float64
high_raw                 float64
low_raw                  float64
close_raw                float64
open_original            float64
high_original            float64
low_original             float64
close_original           float64
day_of_week                int32
month                      int32
sma_50                   float64
ema_50                   float64
dtype: object
11-04-2025 15:21:00 - INFO - Model prediction: [1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 0 1 1 0 1 1
 1 0 1 1 0 0 1 0 1 0 1 1 1 0 0 1 0 0 0 1 1 1 1 1 1 1 1 1 0 1 1 1 0 1 0 0 0
 1 1 0 0 1 1 1 1 1 1 0 1 0 1 1 1 1 0 1 1 0 1 1 1 1 1 1 1 1 1 0 0 1 1 0 1 1
 1 0 1 1 0 1 1 1 0 0 0 1 1 1 1 1 1 0 0 1 1 1 0 0 1 1 1 1 1 1 0 0 0 0 0 0 1
 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1 1 1 1 1 0 1 1 0 0 1 1 0
 1 1 0 1 0 1 1 1 1 1 1 1 1 0 0 0 1 1 1 0 1 0 0 0 0 0 0 0 1 1 0 1 1 1 0 1 1
 1 1 0 1 0 1 0 1 1 1 1 0 1 0 1 0 0 1 0 0 1 0 1 0 0 0 1 1 1]
11-04-2025 15:21:00 - DEBUG - Getting latest data. recent_data size: 251
11-04-2025 15:21:00 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:21:00 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:21:00 - DEBUG - Resampler decision: True
11-04-2025 15:21:00 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:21:00 - WARNING - Too many features missing (39), skipping signal generation
11-04-2025 15:21:01 - DEBUG - Getting latest data. recent_data size: 251
11-04-2025 15:21:01 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:21:01 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:21:01 - DEBUG - Resampler decision: True
11-04-2025 15:21:01 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:21:01 - WARNING - Too many features missing (39), skipping signal generation
11-04-2025 15:21:02 - DEBUG - Getting latest data. recent_data size: 251
11-04-2025 15:21:02 - DEBUG - generate_signals called with 1 symbols
11-04-2025 15:21:02 - DEBUG - Processing symbol GBPUSD with timestamp 2025-04-11 15:20:00
11-04-2025 15:21:02 - DEBUG - Resampler decision: True
11-04-2025 15:21:02 - WARNING - Missing required features: ['gk_volatility', 'open_return', 'low_return', 'high_return', 'volatility_5', 'price_accel', 'roc_5', 'roc_1', 'volatility_10', 'volatility_20', 'volatility_30', 'macd_hist', 'roc_10', 'macd_signal', 'roc_20', 'dist_to_support_20', 'dist_to_resistance_10', 'rsi_14', 'normalized_atr', 'stoch_d', 'dist_to_support_10', 'dist_to_resistance_20', 'macd', 'atr_14', 'stoch_k', 'hour_of_day', 'ema_200', 'open_raw', 'high_raw', 'low_raw', 'close_raw', 'open_original', 'high_original', 'low_original', 'close_original', 'day_of_week', 'month', 'sma_50', 'ema_50']
11-04-2025 15:21:02 - WARNING - Too many features missing (39), skipping signal generation
11-04-2025 15:21:03 - INFO - Received shutdown signal, stopping trading...
11-04-2025 15:21:03 - INFO - Stopping live trading service
11-04-2025 15:21:03 - INFO - Trading loop exited
11-04-2025 15:21:03 - INFO - Closing all positions: 0 positions
11-04-2025 15:21:04 - INFO - Sleeping for 5 seconds before closing ALL active positions..
11-04-2025 15:21:09 - INFO - All positions closed successfully
11-04-2025 15:21:09 - INFO - Backtest completed with model-based strategy
11-04-2025 15:21:09 - INFO - Live trading service stopped
11-04-2025 15:21:09 - INFO - Ended session: {"status":"SUCCESS"}
11-04-2025 15:21:09 - WARNING - Trading service is not running
11-04-2025 15:21:09 - INFO - Ended session: {"errorCode":"error.invalid.session.token"}
11-04-2025 15:21:09 - INFO - Live trading session ended
11-04-2025 15:21:48 - DEBUG - Ping sent at 15:21:48
11-04-2025 15:22:27 - INFO - Received shutdown signal, stopping trading...
11-04-2025 15:22:27 - WARNING - Trading service is not running
